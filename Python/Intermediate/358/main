## [2018-04-25] Challenge #358 [Intermediate] Everyone's A Winner!
## https://www.reddit.com/r/dailyprogrammer/comments/8ewq2e/20180425_challenge_358_intermediate_everyones_a/

import re

file_path = r"C:\Users\ml044041\Python\Text Docs\NBA.txt" # work
# file_path = r"I:\Python Scripts\Text_Files\NBA.txt" # home

with open(file_path, "r") as content:
    file = content.read().splitlines()
    # file2 = content.read()
# file2 = open(file_path).readlines()
# print(file2)
# print(file)
mylist = []
def list_in_list(mylist):
    for line in file:
        # extraction = re.findall(r"(?<=[ @])(\w+)(?=[ ])",line)
        extraction_2 = re.split(r"\s+", line)
        # mylist.append(extraction)
        mylist.append(extraction_2[1:])
    return mylist

def initial_clean(mylist):
    removed_empty_lists = [myl for myl in mylist if len(myl) != 0] # Removes empty lists
    new_list = []

    for list in removed_empty_lists: # Only returns lists with numbers
        for elt in list:
            if elt.isdigit():
                new_list.append(list)
                break
    return new_list

## join up the text in each list, use enumerate

def join_scores(mylist):
    new_list = []
    for list in mylist:
        # for index in range(1,len(list)):
        #     if list[index-1].isstr() and list[index].str():
        #         new_inner_list += list[index-1] + " " + list[index]
        #     else:
        #         new_inner_list.append(list[index])
        inner_list = []
        current_string = ""
        for element in list:
            if element.isdigit():
                current_string = current_string[:-1]
                inner_list.append(current_string)
                inner_list.append(element)
                current_string = ""

            elif isinstance (element, str):
                if re.search("@", element):
                    element = element [1:]
                element += " "
                current_string += element
            else:
                inner_list.append(current_string)
                inner_list.append(element)
                current_string = ""

        new_list.append(inner_list)
        # print (type(inner_list))
        # break
        # print (len(new_list))

    return new_list

def clean_two(mylist):
    for list in mylist:
        if len(list) != 4:
            mylist.remove(list)
    return mylist

def populate_teams(mylist):
    teams = []
    for list in mylist:
        for element in list:
            if not element.isdigit() and element not in teams:
                # print (element)
                teams.append(element)
    return teams

def winner(mylist):
    number_of_wins = {}
    for list in mylist:
        # print(list)
        if list[1] > list[-1]:
            number_of_wins.setdefault(list[0],0)
            number_of_wins[list[0]] += 1
        elif list[1] < list[-1]:
            number_of_wins.setdefault(list[2], 0)
            number_of_wins[list[2]] += 1

    winner_score = 0
    temp_winner = ""

    for team, wins in number_of_wins.items():
        if wins > winner_score:
            # print(team)
            winner_score = wins
            temp_winner = team
    print(temp_winner)
    print("Winner is:", temp_winner, "With a total number of victories of:", winner_score)
    return number_of_wins

def transitive (team_list, all_scores):
    new_list = team_list.copy()
    winning_teams = []
    switch = True
    if switch:
        switch = False
        for match in all_scores:
            for score in match:
                if score[1] > score[-1]:
                    print("blah")
                elif score[1] < score[-1]:
                    print("bloo")


## then if there are 4 elements in the list

foo = list_in_list(mylist)
# print(foo)
initial_clean(foo)
bar = join_scores(foo)
bar_2 = initial_clean(bar)
bar_3 = (clean_two(bar_2))
teams = populate_teams(bar_3)

# print(foo)
# print(winner(bar_3))
print(bar_3)

# Return list with all teams
# Overall winner = number 1 so can remove that team from this list
# Then any team that beat that team you remove from the over all list all the way down
